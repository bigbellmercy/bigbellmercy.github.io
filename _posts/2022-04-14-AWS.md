---
title: "아마존 AWS의 클라우드 컴퓨팅 서비스 기초 사용법"
date: 2022-4-14 16:43:00 +09:00
categories: AWS
---

# 목적
아마존(Amazon) 사의 AWS(Amazon Web Service)가 제공하는 '클라우드 컴퓨팅 서비스'(cloud computing service)의 기초적인 사용법을 설명한다.

# EC2 사용법
## EC2 개요
EC2(Elastic Compute 2)는, AWS의 주요한 제공 서비스로서, 사용자에게 가상의 컴퓨터 환경을 제공한다.
사용자는 인터넷이 연결된 사용자 컴퓨터에서 AWS의 서버에 접속해서 그 속에 가상의 컴퓨터를 실행시켜서 원격으로 가상의 컴퓨터의 화면을 보면서 쓸 수 있다.
원격의 컴퓨터의 운영체제는 윈도우, 리눅스 등 여러가지를 고를 수 있고, 사용자 컴퓨터의 운영체제도 원격 컴퓨터의 것과 달라도 되며 윈도우와 리눅스 등을 쓸 수 있다.

## 사용 비용
- 처음 가입하면 일정 기간 동안 낮은 성능의 가상 컴퓨터에 한해 무료로 쓸 수 있게 해주나, 더 높은 성능을 쓰면 비용이 청구된다.
- 비용은 가상 컴퓨터의 선택한 성능에 따라 달라지는데, 성능이 낮은 것은 1 시간에 싼 것은 수 백원부터, 성능을 올리면 1 천원 내외, 더 높은 것은 수 천원도 나온다.
- 처음 쓴 뒤에 하루 정도 지나야 비용이 나타난다.
- 전화로 기술 지원을 받으려면 지원(support) 옵션을 Buisiness로 바꾸어야 하는데 1달에 약 10만원 정도이고, 그렇지 않으면, 이메일이나 게시판에 문의해야 한다.

## 회원 가입
1. AWS 홈페이지에서 회원 가입을 하고, 신용카드 정보를 입력해야만 가입이 된다. 신용카드의 사용 가능 확인을 위해 100원이 결제되었다가 취소되므로 돈이 나가지는 않는다.
2. 처음 가입할 때에 안내를 따르다 보면 휴대폰에서 인증 번호를 보내는 앱을 설치해야 하는데, Google Authenticator를 내려받아 쓸 수 있다.
3. 가상 컴퓨터에 로그인할 때에 사용자 ID와 암호를 넣는 대신에, PEM Key라는 파일을 쓰므로, PEM Key를 만들고 그 파일을 USB나 컴퓨터 폴더에 보관해야 하며, 나중에 다시 만들 수도 있다.
4. PEM Key 파일의 속성에서, 그 소유자는, 가상 컴퓨터에 접속할 사용자 컴퓨터의 사용자가 되어야 하고, 파일 사용 권한은 그 사용자만 있어야 접속이 된다. 윈도우에서는 파일 속성의 고급으로 들어가서 그렇게 설정하고, 리눅스에서는 chmod 444로 설정한다.
5. 처음에 '루트 사용자'(root user) 로그인한 뒤에, 안내에 따라, 'IAM 사용자'를 하나 이상 만들고 설정하라고 추천하는데, 필수는 아니다.
6. 루트 사용자가 여러 IAM 사용자들을 관리하는 식인데, 루트 사용자라서 로그인 시 휴대폰 인증을 계속 체크하는 불편을 감수한다면, IAM 사용자 없이 써도 된다.

## 사용 과정
1. 가상 컴퓨터에 운영체제나 드라이버 등이 설치된 소프트웨어 환경을 미리 떠서 저장해 둔 것을 이미지(image)라고 하고 여기서는 AMI(Amazon Machine Image)라고 한다.
2. Launch Instances를 누르고 검색란에 Windows나 Ubuntu 등의 미리 만들어 놓은 AMI를 검색하고 고른다.
3. 가상 컴퓨터의 성능 사양을 고르는데, 무료로 표시된 것이 t2가 있고, g4는 그래픽용인데 g4dn은 NVIDIA GPU를 가졌으며, 옆에 1시간당 사용 가격이 나타난다.
4. Network의 방화벽(firewall) 설정에서 기본 설정된 규칙(rule)을 지우고, 새로 규칙을 추가하여, All trafic, My IP를 고르면 내 컴퓨터에서만 쓸 수 있게 된다.
5. Launch를 누르면 가상 컴퓨터가 생겨서 이를 인스탄스(instance)(사례)라고 부르며 Instances라는 화면에 한 줄이 나타난다.
6. 하나의 AMI로 여러 개의 인스탄스들을 만들고, 실행(run), 정지(stop), 재시작(restart), 종료/폐기(terminate)할 수 있다.
7. 사용자 컴퓨터에서 가상 컴퓨터에 접속하는 기본적인 방법은 ssh (secure shell) 원격 셸 접속 명령으로 접속한다.
8. 윈도우나 리눅스의 명령창(cmd, terminal)을 열고, cd 명령으로 PEM key 파일이 저장된 경로로 이동한다.
9. ssh 접속 명령을 치는데, 그 명령은 Instances 화면에서 해당 인스탄스를 고르고 Connect를 눌러 ssh 탭에 나오는 명령을 복사하여 실행한다.
10. 이때, 가상 컴퓨터의 Public IP 주소나 DNS 주소를 쓰게 되는데, 이 주소들은 인스탄스를 정지(stop) 했다가 다시 실행(run)하면 매번 바뀐다.
11. 접속이 성공하면, ssh에서 원격 터미널 소프트웨어 등을 써서 사용자 컴퓨터에서 가상 컴퓨터의 GUI 화면을 보면서 쓸 수 있다.
12. 사용이 끝났으면 그 인스탄스를 정지(stop) 해야 요금이 더 나오지 않는다.

## vCPU 제한 올리기
1. 사용 가능한 가상 CPU인, vCPU의 개수가 제한이 되어 있는데, 4개가 기본 값이고, 그보다 더 올리려면 EC2의 Limit(제한) 화면에서 신청해야 한다.
2. NVIDIA 그래픽을 사용하는 g4dn 사양의 경우에 vCPU를 16 개까지 올리는 것은 한 시간 내로 허락이 되었으나, 32나 96개로 올리는 신청은, 이용자 과다로 취소된 적이 있다.

## 여러 컴퓨터에서 하나의 인스턴스를 쓸 때
1. PEM 키를 USB에 담은 경우, 한 컴퓨터에서 쓰다가 다른 컴퓨터에서 다시 쓰려면, 그 파일의 소유자를 그 컴퓨터의 해당 사용자로 바꾸고, 그 사용자만 다시 모든 권한을 부여해야 한다.
2. 인스턴스의 보안(security) 설정에서 방화벽 규칙(rule)에, 한 인스턴스를 같이 쓰려는 컴퓨터들의 주소들이 허용되도록, 여러 규칙들을 넣어 주어야 한다. 인스턴스의 Security 화면에서 수정할 수 있다.

## 기술 지원
- 기본적으로, 기술 지원 부서의 전화 번호가 공개되지 않으며, 기술 지원 엔지니어에게 전화를 걸 수 없다.
- 기술 지원 옵션이 여러가지 있는데 무료인 기본(Basic) 지원 옵션은 포럼 게시판에만 질문을 올릴 수 있다.
- 개발자(developer) 지원 옵션부터 돈이 한달에 몇 만원나가는데 이메일은 되지만 전화 지원은 안된다.
- 사업(Business) 지원 옵션부터 전화로 기술 지원을 받을 수 있으나 전화를 걸 수는 없다.
- 기술 지원 신청서를 올릴 때, 전화 지원 옵션을 고르고, 영어로 문의 내용을 적고 신청하면, 바로 미국에서 국제 전화가 오는데,
  기술자가 영어로 말하기 때문에, 한국 엔지니어와 통화하고 싶다고 영어로 말하니, 통화 끊은 뒤에 한국 엔지니어로부터 전화가 왔다.
- 그래서, 지원 옵션을 전화대신, 이메일로 고르고, 한국말을 적고 전화 상담을 원한다고 적으면, 영어 통화 없이도, 한국 기술자로부터 전화가 올 거라 한다.


## 참고 자료
AWS의 EC2 사용법은 아래의 내용을 참고 하였음:
https://docs.omniverse.nvidia.com/app_isaacsim/app_isaacsim/install_advanced_cloud_setup_aws.html#isaac-sim-setup-aws-requirements
